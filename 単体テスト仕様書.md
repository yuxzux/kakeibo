# 家計簿アプリ 単体テスト仕様書

## 1. テスト目的
各関数・API・画面の単体動作を検証し、個々の機能が正しく動作することを確認する。

## 2. テスト環境
- OS: macOS
- フレームワーク: Flask
- DB: SQLite
- テストツール: pytest, Flaskテストクライアント

## 3. テスト項目

### 3.1 DB初期化
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-01 | DB初期化 | init_db関数を実行 | entriesテーブルが作成される |

### 3.2 収支・収入登録API
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-02 | 正常登録 | 必須項目をPOSTし登録 | DBにデータが追加される |
| UT-03 | 必須項目未入力 | 必須項目なしでPOST | エラーが返却される |
| UT-04 | 金額に文字入力 | 金額欄に数字以外をPOST | エラーが返却される |
| UT-05 | 日付に未来日入力 | 未来日をPOST | エラーが返却される |

### 3.3 一覧取得API
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-06 | 一覧取得 | GET /entries | 登録済みデータが取得できる |
| UT-07 | 並び替え | sortパラメータで取得 | 並び替え結果が正しい |

### 3.4 編集API
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-08 | 正常編集 | 既存データをPUTで編集 | 編集内容が反映される |
| UT-09 | 存在しないID編集 | 存在しないIDでPUT | エラーが返却される |

### 3.5 削除API
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-10 | 正常削除 | 既存データをDELETE | データが削除される |
| UT-11 | 存在しないID削除 | 存在しないIDでDELETE | エラーが返却される |

### 3.6 集計API
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-12 | 月集計 | GET /summary | 月ごとの合計が正しく返却される |
| UT-13 | カテゴリ集計 | GET /summary | カテゴリごとの合計が正しく返却される |

### 3.7 画面表示
| テストID | 項目 | 手順 | 期待結果 |
|----------|------|------|----------|
| UT-14 | ホーム画面 | GET / | 合計が正しく表示される |
| UT-15 | 登録画面 | GET /entry | 登録フォームが表示される |
| UT-16 | 一覧画面 | GET /entries | 一覧テーブルが表示される |
| UT-17 | 編集画面 | GET /entry/<id>/edit | 編集フォームが表示される |
| UT-18 | 集計画面 | GET /summary | 集計テーブルが表示される |

## 4. テストデータ例
| 日付 | カテゴリ | 金額 | メモ | 種別 |
|------|----------|------|------|------|
| 2025-08-01 | 食費 | 2000 | 昼食 | 支出 |
| 2025-08-02 | 給与 | 100000 | 8月分 | 収入 |

## 5. テスト実施・記録
- 各項目ごとにテスト結果を記録し、問題があれば修正対応する。
